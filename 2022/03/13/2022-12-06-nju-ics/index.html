<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="computer science">
    
    <meta name="author" content="fetch150zy">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://fetch150zy.github.io/2022/03/13/2022-12-06-nju-ics/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="nju ics   南京大学计算机系统基础习题课 Jyy  C语言拾遗 - 机制 编译、链接 .c -&gt; 预编译 -&gt; .i -&gt; 编译 -&gt; .s -&gt; 汇编 -&gt; .o -&gt; 链接 -&gt; a.out   加载执行 .&#x2F;a.out       RTFM: man gcc   better: tldr  一些命令行工具 file readelf ob">
<meta property="og:type" content="article">
<meta property="og:title" content="南大 ICS">
<meta property="og:url" content="https://fetch150zy.github.io/2022/03/13/2022-12-06-nju-ics/index.html">
<meta property="og:site_name" content="fetch150zy&#39;blog">
<meta property="og:description" content="nju ics   南京大学计算机系统基础习题课 Jyy  C语言拾遗 - 机制 编译、链接 .c -&gt; 预编译 -&gt; .i -&gt; 编译 -&gt; .s -&gt; 汇编 -&gt; .o -&gt; 链接 -&gt; a.out   加载执行 .&#x2F;a.out       RTFM: man gcc   better: tldr  一些命令行工具 file readelf ob">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-03-12T17:29:46.000Z">
<meta property="article:modified_time" content="2024-03-23T06:00:53.667Z">
<meta property="article:author" content="fetch150zy">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="C语言">
<meta property="article:tag" content="汇编语言">
<meta property="article:tag" content="公开课">
<meta name="twitter:card" content="summary">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/img/pacman.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/pacman.png">
    <meta name="theme-color" content="#7FCDCD">
    <link rel="shortcut icon" href="/img/pacman.png">
    <!--- Page Info-->
    
    <title>
        
            南大 ICS -
        
        fetch150zy&#39;s blog
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
        <style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    
<script src="/js/libs/anime.min.js"></script>

    <h1 class="ml13">
        fetch150zy&#39;s blog
    </h1>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });


        anime.timeline({loop: true})
            .add({
                targets: '.ml13 .letter',
                translateY: [100,0],
                translateZ: 0,
                opacity: [0,1],
                easing: "easeOutExpo",
                duration: 1400,
                delay: (el, i) => 300 + 30 * i
            }).add({
            targets: '.ml13 .letter',
            translateY: [0,-100],
            opacity: [1,0],
            easing: "easeInExpo",
            duration: 1200,
            delay: (el, i) => 100 + 30 * i
        });

        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            hidePreloaderAfterTimeout(1000); // Hide after 1000 milliseconds once the window has loaded
        });

        // Backup failsafe: Hide preloader after a maximum of 5000 milliseconds, regardless of the window load event
        hidePreloaderAfterTimeout(5000);

        function hidePreloaderAfterTimeout(delay) {
            setTimeout(function () {
                var preloader = document.querySelector('.preloader');
                preloader.style.opacity = '0';
                setTimeout(function () {
                    preloader.style.display = 'none';
                }, 200);
            }, delay);
        }
    </script>
</div>
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/fonts.css">

    
<link rel="stylesheet" href="/fonts/Satoshi/satoshi.css">

    <!--- Font Part-->
    
    
    
    


    <script id="hexo-configurations">
    window.config = {"hostname":"fetch150zy.github.io","root":"/","language":"zh-CN"};
    window.theme = {"articles":{"style":{"font_size":"18px","line_height":1.4,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"title_alignment":"center","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":false,"count":false,"min2read":false},"author_label":{"enable":false,"auto":false,"list":[]},"code_block":{"copy":false,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":false,"expand":true,"init_open":true},"copyright":{"enable":false,"default":"cc_by_nc_sa"},"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":null,"skip_dirs":[]}},"colors":{"primary":"#7FCDCD","secondary":null,"default_mode":"dark"},"global":{"fonts":{"chinese":{"enable":null,"family":null,"url":null},"english":{"enable":null,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":true},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":false,"site_pv":false,"site_uv":false,"post_pv":false},"single_page":true,"preloader":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/img/bg15.jpg","dark":"/img/bg15.jpg"},"title":"fetch150zy's blog","subtitle":{"text":["年年岁岁花相似，岁岁年年人不同"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.3},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/fetch150zy","bilibili":"https://space.bilibili.com/505867894","stack-overflow":"https://stackoverflow.com/users/16738249/fetch150zy","email":"mailto:mars_zhewei@outlook.com"},"qrs":{"weixin":"https://pic.fetch150zy.cn/weixin.png"}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.6.1","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Blog":"https://fetch150zy.cn","Github":"https://github.com/fetch150zy"}}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":3,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"right","first_item":"info","announcement":null,"show_on_mobile":true,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"YYYY-MM-DD","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":null};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
        
<link rel="stylesheet" href="/fontawesome/sharp-solid.min.css">

    
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
<!--        <span class="swup-progress-icon">-->
<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
<!--        </span>-->
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container px-6 md:px-12">

    <div class="navbar-content ">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/img/pacman.png">
                </a>
            
            <a class="logo-title" href="/">
                
                fetch150zy&#39;s blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    归档
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown"
                                   href="#"
                                        onClick=&#34;return false;&#34;>
                                    <i class="fa-regular fa-user fa-fw"></i>
                                    关于
                                    <i class="fa-solid fa-chevron-down fa-fw"></i>
                                </a>

                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                        
                                            <li>
                                                <a href="/about">
                                                    ME
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="https://fetch150zy.cn">
                                                    BLOG
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a target="_blank" rel="noopener" href="https://github.com/fetch150zy">
                                                    GITHUB
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-screen w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                归档
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full">
                        
                        <div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                             navbar-data-toggle="submenu-About"
                        >
                            <span>
                                关于
                            </span>
                            
                                <i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i>
                            
                        </div>
                        

                        
                            <div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-About">
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/about">ME</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="https://fetch150zy.cn">BLOG</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           target="_blank" rel="noopener" href="https://github.com/fetch150zy">GITHUB</a>
                                    </div>
                                
                            </div>
                        
                    </li>
            

            
            
                
                    
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/tags"
                        >
                            <span>Tags</span>
                            <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                        </a>
                    </li>
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/categories"
                        >
                            <span>Categories</span>
                            <i class="fa-regular fa-folder fa-sm fa-fw"></i>
                        </a>
                    </li>
                
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">21</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">18</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">54</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container flex relative justify-between box-border w-full h-full">
    <div class="article-content-container">

        <div class="article-title relative w-full">
            
                
                
                <img src="/../img/bg/21.png" alt="南大 ICS" class="w-full h-60 sm:h-72 md:h-80 object-cover sm:rounded-t-large dark:brightness-75"/>
                
                <div class="w-full flex items-center absolute bottom-0 justify-center">
                    <h1 class="article-title-cover text-center mx-6 my-6 text-second-text-color bg-background-color-transparent px-4 py-3 text-3xl sm:text-4xl md:text-5xl font-bold backdrop-blur-lg rounded-xl border border-border-color ">南大 ICS</h1>
                </div>
            
            </div>

        
            <div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/img/avatar.jpg">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">fetch150zy</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2022-03-13 01:29:46</span>
        <span class="mobile">2022-03-13 01:29:46</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2024-03-23 14:53</span>
            <span class="mobile">2024-03-23 14:53</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/Class/">Class</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Linux/">Linux</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/C%E8%AF%AD%E8%A8%80/">C语言</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/">汇编语言</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E5%85%AC%E5%BC%80%E8%AF%BE/">公开课</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
            <h1 id="nju-ics"><a href="#nju-ics" class="headerlink" title="nju ics"></a>nju ics</h1><blockquote>
<p>  南京大学计算机系统基础习题课 Jyy</p>
</blockquote>
<h2 id="C语言拾遗-机制"><a href="#C语言拾遗-机制" class="headerlink" title="C语言拾遗 - 机制"></a>C语言拾遗 - 机制</h2><ul>
<li>编译、链接<ul>
<li>.c -&gt; 预编译 -&gt; .i -&gt; 编译 -&gt; .s -&gt; 汇编 -&gt; .o -&gt; 链接 -&gt; a.out</li>
</ul>
</li>
<li>加载执行<ul>
<li><code>./a.out</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>  RTFM: man gcc</p>
<p>  better: tldr</p>
</blockquote>
<h4 id="一些命令行工具"><a href="#一些命令行工具" class="headerlink" title="一些命令行工具"></a>一些命令行工具</h4><ul>
<li>file</li>
<li>readelf</li>
<li>objdump</li>
<li>…</li>
</ul>
<blockquote>
<p>  GNU BinUtils</p>
</blockquote>
<h3 id="预处理器"><a href="#预处理器" class="headerlink" title="预处理器"></a>预处理器</h3><h4 id="include-指令"><a href="#include-指令" class="headerlink" title="#include&lt;&gt; 指令"></a>#include&lt;&gt; 指令</h4><div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdio.h&quot;</span></span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>  #include 指令本质上就是在预处理阶段进行粘贴</p>
</blockquote>
<p>看看下面这段有趣的代码: </p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(</span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hello.h&quot;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hello.h</span></span><br><span class="line"><span class="string">&quot;hello\n&quot;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>&lt;&gt;: 优先在系统级目录下寻找头文件，如果找不到再到当前目录下寻找<ul>
<li>可以使用<code>gcc --verbose</code>来查看到底查找了哪些目录</li>
</ul>
</li>
<li>“ “: 优先在当前目录下寻找</li>
</ul>
<blockquote>
<p>  上面两种情况假设我们没有在编译时通过 -I 来指定头文件目录</p>
</blockquote>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">   	<span class="meta">#<span class="keyword">if</span> aa == bb</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">    <span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>  上面这段代码会输出 Yes，这是因为在C预处理器中，如果一个宏没有被定义，那么它在条件编译表达式中的值会被视为0</p>
<p>  <code>#if aa == bb</code>被替换成了<code>#if 0 == 0</code>，这是一个true条件</p>
</blockquote>
<p><strong>如何躲过 Online Judge 的关键字过滤</strong></p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SYSTEM sys ## tem</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>  <em>## 宏拼接</em></p>
</blockquote>
<p><strong>如何毁掉一个身边的同学</strong></p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> true (__LINE__ % 16 != 0)</span></span><br></pre></td></tr></table></figure></div>



<p><strong>X-Macros</strong></p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> NAMES(X) \</span></span><br><span class="line"><span class="meta">	X(Tom) X(Jerry) X(Tyke) X(Spike)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> PRINT(x) puts(<span class="string">&quot;Hello, &quot;</span> #x <span class="string">&quot;!&quot;</span>);</span></span><br><span class="line">    NAMES(PRINT)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<blockquote>
<p>  发生在实际编译之前</p>
<ul>
<li>也成为元编程(meta-programming)<ul>
<li>gcc的预处理器同样可以处理汇编代码</li>
<li>C++中的模板元编程，Rust的macros等</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="编译和链接"><a href="#编译和链接" class="headerlink" title="编译和链接"></a>编译和链接</h3><blockquote>
<p>  C是高级的汇编语言</p>
</blockquote>
<h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><p>将多个二进制目标文件拼接到一起</p>
<ul>
<li>C中的编译单元( compilation unit )</li>
<li>甚至可以链接C++, Rust, …</li>
</ul>
<h3 id="加载"><a href="#加载" class="headerlink" title="加载"></a>加载</h3><h4 id="C程序执行的两个视角"><a href="#C程序执行的两个视角" class="headerlink" title="C程序执行的两个视角"></a>C程序执行的两个视角</h4><p>静态：C代码的连续一段总能对应到一段连续的机器指令</p>
<p>动态：C代码执行的状态总能对应到机器的状态</p>
<ul>
<li>源代码视角<ul>
<li>函数、变量、指针…</li>
</ul>
</li>
<li>机器指令视角<ul>
<li>寄存器、内存、地址</li>
</ul>
</li>
</ul>
<p>两个视角的共同之处</p>
<ul>
<li>代码、变量（源代码视角）&#x3D; 地址 +长度（机器指令视角）</li>
<li>（不太严谨的）内存 &#x3D; 代码 +数据 +堆栈</li>
</ul>
<h4 id="从main函数开始"><a href="#从main函数开始" class="headerlink" title="从main函数开始"></a>从main函数开始</h4><p><strong>谁调用的main？进程执行的第一条指令是什么？</strong></p>
<p>第一个问题，谁调用了main</p>
<ul>
<li><code>main</code>实际上是由C运行库中的启动代码(startup code)调用的，这个启动代码代码程序的执行入口点(entry point)，通常是名为<code>_start</code>的函数<br>程序的执行从<code>_start</code>开始，它负责执行所有必要的运行时初始化，包括设置堆栈、初始化全局和静态变量、调用全局构造函数等，然后调用<code>main</code>函数</li>
</ul>
<p>第二个问题，进程执行的第一条指令是什么</p>
<ul>
<li>进程执行的第一条指令是在<code>_start</code>函数中，这是由C运行时库提供的，不是开发者编写的C代码的一部分。<code>_start</code>是程序与操作系统交互的桥梁，它由操作系统在加载程序到内存并准备执行时设置。<code>_start</code>函数的具体职责包括：<ul>
<li>初始化程序执行环境</li>
<li>调用全局和静态变量的构造函数（在C++中）</li>
<li>设置参数（<code>argc</code>、<code>argv</code>）以供<code>main</code>函数使用</li>
<li>调用<code>main</code>函数，并传递适当的参数</li>
<li>捕获<code>main</code>函数的返回值，并将其传递给操作系统（通过调用<code>exit</code>函数或类似机制）</li>
</ul>
</li>
</ul>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, cahar *argv[])</span>;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>argc: 参数个数</li>
<li>argv: 参数列表</li>
</ul>
<h4 id="C-Type-System"><a href="#C-Type-System" class="headerlink" title="C Type System"></a>C Type System</h4><div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;asset.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span> &#123;</span><br><span class="line">    <span class="type">int</span> (*f)(<span class="type">int</span>, <span class="type">char</span> *[]) = main;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">char</span> ***a = &amp;argv, *first = argv[<span class="number">0</span>], ch = argv[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;arg = \&quot;%s\&quot;; ch = &#x27;%c&#x27;\n&quot;</span>, first, ch);</span><br><span class="line">        assert(***a == ch);</span><br><span class="line">        f(argc - <span class="number">1</span>, arhv + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h2 id="C语言拾遗-编程实践"><a href="#C语言拾遗-编程实践" class="headerlink" title="C语言拾遗 - 编程实践"></a>C语言拾遗 - 编程实践</h2><h4 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h4><p>人类不可读版本</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> (*signal(<span class="type">int</span> sig, <span class="type">void</span> (*func)(<span class="type">int</span>)))(<span class="type">int</span>);</span><br></pre></td></tr></table></figure></div>

<p>人类可读版本</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="title function_">void</span> <span class="params">(*<span class="type">sighandler_t</span>)</span><span class="params">(<span class="type">int</span>)</span>;</span><br><span class="line"><span class="type">sighandler_t</span> <span class="title function_">signal</span><span class="params">(<span class="type">int</span>, <span class="type">sighander_t</span>)</span>;</span><br></pre></td></tr></table></figure></div>



<p><strong>数字逻辑电路模拟器</strong></p>
<blockquote>
<p>  状态模拟 +计算模拟</p>
</blockquote>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> FORALL_REGS(_) 	_(X) _(Y)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGIC 	X1 = !X &amp;&amp; Y; \</span></span><br><span class="line"><span class="meta">				Y1 = !X &amp;&amp; !Y;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEFINE(X)	static int X, X##1;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> UPDATE(X)	X = X##1;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PRINT(X)	printf(#X <span class="string">&quot; = %d; &quot;</span>, X);</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    FORALL_REGS(DEFINE);</span><br><span class="line">    DEFINE(X) DEF(Y)</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">        FORALL_REGS(PRINT); <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>); sleep(<span class="number">1</span>);</span><br><span class="line">        LOGIC;</span><br><span class="line">        FORALL_REGS(UPDATE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="编写代码的准则：降低维护成本"><a href="#编写代码的准则：降低维护成本" class="headerlink" title="编写代码的准则：降低维护成本"></a>编写代码的准则：降低维护成本</h4><p><em>Programs are meant to be read by humans and only incidentally for computers to execute. – D.E.Knuth</em></p>
<h3 id="Y-Emulator"><a href="#Y-Emulator" class="headerlink" title="Y-Emulator"></a>Y-Emulator</h3><p>存储是计算机能实现“计算”的重要基础</p>
<ul>
<li>寄存器、内存</li>
</ul>
<blockquote>
<p>  减少dependencies -&gt; 降低代码耦合程度</p>
</blockquote>
<p>代码实现和优化部分建议看原视频</p>
<h2 id="框架代码选讲-编译运行"><a href="#框架代码选讲-编译运行" class="headerlink" title="框架代码选讲 - 编译运行"></a>框架代码选讲 - 编译运行</h2><p>有个叫 <code>-rf</code>的文件如何删除</p>
<p>显然<code>rm -rf</code>不起作用，使用<code>rm -- rf</code>，其中<code>--</code>会将其后参数解释为文件名</p>
<p>大概就是从make（构建工具）的角度来解析项目结构，从有向无环图的角度来解释make构建的目标依赖</p>
<p>UNIX哲学可以帮助你更好的阅读代码</p>
<p><strong>基本原则：任何感到不爽的事情一定有工具能帮你</strong></p>
<h2 id="代码框架选讲-代码导读"><a href="#代码框架选讲-代码导读" class="headerlink" title="代码框架选讲 - 代码导读"></a>代码框架选讲 - 代码导读</h2><blockquote>
<p>  建议看原视频</p>
</blockquote>
<h2 id="数据的机器级表示-整数和浮点数"><a href="#数据的机器级表示-整数和浮点数" class="headerlink" title="数据的机器级表示 - 整数和浮点数"></a>数据的机器级表示 - 整数和浮点数</h2><h3 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h3><blockquote>
<p>  位运算有很多骚操作，感兴趣的可以做一下cmu 15-213的data lab</p>
</blockquote>
<p>这里老师推荐了一本书：Hacker’s Delight</p>
<p>IEEE 754是一个非常复杂的标准，这里Jyy举了一个倒速平方根的例子（出自雷神之锤III）</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> <span class="title function_">Q_rsqrt</span><span class="params">( <span class="type">float</span> number )</span> &#123;</span><br><span class="line">    <span class="type">long</span> i;</span><br><span class="line">    <span class="type">float</span> x2, y;</span><br><span class="line">    <span class="type">const</span> <span class="type">float</span> threehalfs = <span class="number">1.5F</span>;</span><br><span class="line">    </span><br><span class="line">    x2 = number * <span class="number">0.5F</span>;</span><br><span class="line">    y = number;</span><br><span class="line">    i = * ( <span class="type">long</span> * ) &amp;y;						<span class="comment">// evil floating point bit hack</span></span><br><span class="line">    i = <span class="number">0x5f3759df</span> - (i &gt;&gt; <span class="number">1</span>);					<span class="comment">// what the fuck?</span></span><br><span class="line">    y = * ( <span class="type">float</span> * ) &amp;i;</span><br><span class="line">    y = y * ( threehalfs - ( x2 * y * y ) );	<span class="comment">// 1st iteration</span></span><br><span class="line"> <span class="comment">// y = y * ( threehalfs - ( x2 * y * y ) );	// 2nd iteration, can be removed</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><a class="link"   target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1v64y1i7KH/?spm_id_from=333.337.search-card.all.click&vd_source=f9f1621b9188dd1bb7da362dd8ae49a6" >讲解 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h2 id="汇编-内联汇编选讲-x86-64"><a href="#汇编-内联汇编选讲-x86-64" class="headerlink" title="汇编 &#x2F;内联汇编选讲 - x86-64"></a>汇编 &#x2F;内联汇编选讲 - x86-64</h2><p>书籍推荐：Richard.Blum 编程语言程序设计</p>
<p><strong>关于int类型的长度</strong></p>
<ul>
<li>8 bit computer: 8 bit</li>
<li>16 bit computer: 16bit</li>
<li>32 bit computer: 32 bit</li>
<li>64 bit computer: 32 bit</li>
<li>JVM (32&#x2F;64 bit): 32 bit</li>
</ul>
<h3 id="ABI"><a href="#ABI" class="headerlink" title="ABI"></a>ABI</h3><blockquote>
<p>  只要遵循某种标准的二进制文件就可以相互调用</p>
</blockquote>
<p>区别于API (Application Programming Interface)</p>
<ul>
<li>程序源代码中的规范</li>
</ul>
<p>ABI: 约束binary的行为</p>
<ul>
<li>二进制文件的格式</li>
<li>函数调用、系统调用<ul>
<li>C语言规范只定义了运行时内存和内存上的计算</li>
<li>printf都无法实现，必须借助外部库函数</li>
</ul>
</li>
<li>链接、加载的规范</li>
</ul>
<h3 id="例子-cdecl-函数调用"><a href="#例子-cdecl-函数调用" class="headerlink" title="例子: cdecl 函数调用"></a>例子: cdecl 函数调用</h3><p>caller stack frame:</p>
<ul>
<li>所有参数以数组的形式保存在堆栈上 (反序压栈)</li>
<li>返回地址</li>
<li>跳转到callee</li>
</ul>
<p>callee:</p>
<ul>
<li>EAX作为返回寄存器</li>
<li>其他寄存器都是callee save</li>
</ul>
<blockquote>
<p>  跳转采用的是相对地址，且相对位置为当前指令的尾部，即下一条指令的开头</p>
</blockquote>
<p>e.g.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">bar</span><span class="params">(<span class="type">int</span> *)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">foo</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    bar(&amp;x);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc -m32 -O2 -fno-pic -c a.c</span><br><span class="line">objdump -d a.o</span><br></pre></td></tr></table></figure></div>

<p>我们可以得到非常易读的汇编</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">00000000 &lt;foo&gt;:</span><br><span class="line">   0:	83 ec 18             	sub    $0x18,%esp</span><br><span class="line">   3:	8d 44 24 1c          	lea    0x1c(%esp),%eax</span><br><span class="line">   7:	50                   	push   %eax</span><br><span class="line">   8:	e8 fc ff ff ff       	call   9 &lt;foo+0x9&gt;</span><br><span class="line">   d:	8b 44 24 20          	mov    0x20(%esp),%eax</span><br><span class="line">  11:	83 c4 1c             	add    $0x1c,%esp</span><br><span class="line">  14:	c3                   	ret</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>  SAT Solver -&gt; SMT Solver</p>
</blockquote>
<h3 id="寄存器与函数调用"><a href="#寄存器与函数调用" class="headerlink" title="寄存器与函数调用"></a>寄存器与函数调用</h3><p>Q: 为什么x86-64要采用寄存器传参？</p>
<ul>
<li>简化代码</li>
<li>减少访存</li>
<li>编译器有了更大的优化空间</li>
</ul>
<h3 id="Inline-Assembly"><a href="#Inline-Assembly" class="headerlink" title="Inline Assembly"></a>Inline Assembly</h3><p>编译器：把C代码“原样翻译”成汇编代码</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">foo</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    x++; y++;</span><br><span class="line">    <span class="keyword">asm</span> (<span class="string">&quot;endbr64;&quot;</span></span><br><span class="line">        <span class="string">&quot;.byte 0xf3, 0x0f, 0x1e, 0xfa&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -O0 -c a.c -o a.o &amp;&amp; objdump -d a.o</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">0000000000000000 &lt;foo&gt;:</span><br><span class="line">   0:   55                      push   %rbp</span><br><span class="line">   1:   48 89 e5                mov    %rsp,%rbp</span><br><span class="line">   4:   89 7d fc                mov    %edi,-0x4(%rbp)</span><br><span class="line">   7:   89 75 f8                mov    %esi,-0x8(%rbp)</span><br><span class="line">   a:   83 45 fc 01             addl   $0x1,-0x4(%rbp)</span><br><span class="line">   e:   83 45 f8 01             addl   $0x1,-0x8(%rbp)</span><br><span class="line">  12:   f3 0f 1e fa             endbr64</span><br><span class="line">  16:   f3 0f 1e fa             endbr64</span><br><span class="line">  1a:   8b 55 fc                mov    -0x4(%rbp),%edx</span><br><span class="line">  1d:   8b 45 f8                mov    -0x8(%rbp),%eax</span><br><span class="line">  20:   01 d0                   add    %edx,%eax</span><br><span class="line">  22:   5d                      pop    %rbp</span><br><span class="line">  23:   c3                      ret</span><br></pre></td></tr></table></figure></div>



<p>e.g.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">foo</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="type">int</span> z;</span><br><span class="line">    x++; y++;</span><br><span class="line">    <span class="keyword">asm</span> (</span><br><span class="line">    	<span class="string">&quot;addl %1, %2; &quot;</span></span><br><span class="line">        <span class="string">&quot;movl %2, %0; &quot;</span></span><br><span class="line">        : <span class="string">&quot;=r&quot;</span>(z)			<span class="comment">// output</span></span><br><span class="line">        : <span class="string">&quot;r&quot;</span>(x), <span class="string">&quot;r&quot;</span>(y)	<span class="comment">// input</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -O0 -c a.c -o a.o &amp;&amp; objdump -d a.o</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">0000000000000000 &lt;foo&gt;:</span><br><span class="line">   0:   55                      push   %rbp</span><br><span class="line">   1:   48 89 e5                mov    %rsp,%rbp</span><br><span class="line">   4:   89 7d ec                mov    %edi,-0x14(%rbp)</span><br><span class="line">   7:   89 75 e8                mov    %esi,-0x18(%rbp)</span><br><span class="line">   a:   83 45 ec 01             addl   $0x1,-0x14(%rbp)</span><br><span class="line">   e:   83 45 e8 01             addl   $0x1,-0x18(%rbp)</span><br><span class="line">  12:   8b 45 ec                mov    -0x14(%rbp),%eax</span><br><span class="line">  15:   8b 55 e8                mov    -0x18(%rbp),%edx</span><br><span class="line">  18:   01 c2                   add    %eax,%edx</span><br><span class="line">  1a:   89 d0                   mov    %edx,%eax</span><br><span class="line">  1c:   89 45 fc                mov    %eax,-0x4(%rbp)</span><br><span class="line">  1f:   8b 45 fc                mov    -0x4(%rbp),%eax</span><br><span class="line">  22:   5d                      pop    %rbp</span><br><span class="line">  23:   c3                      ret</span><br></pre></td></tr></table></figure></div>





<h2 id="链接和加载"><a href="#链接和加载" class="headerlink" title="链接和加载"></a>链接和加载</h2><blockquote>
<p>   推荐: GNU Binutils</p>
</blockquote>
<h3 id="一个最小的可执行程序"><a href="#一个最小的可执行程序" class="headerlink" title="一个最小的可执行程序"></a>一个最小的可执行程序</h3><p>e.g.</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov $0xe7, %rax</span><br><span class="line">mov $0x01, %rdi</span><br><span class="line">syscall</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>  返回 1</p>
</blockquote>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">__attribute__((constructor)) <span class="type">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">__attribute__((destructor)) <span class="type">void</span> <span class="title function_">end</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Bye\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    atexit(end);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;This is main func\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="动态链接"><a href="#动态链接" class="headerlink" title="动态链接"></a>动态链接</h3><p>Q: 为什么需要动态链接？</p>
<ul>
<li>静态链接导致可执行文件太大了</li>
</ul>
<p>操作系统启动动态链接依赖的可执行文件</p>
<blockquote>
<p>  通过 <code>/lib64/ld-linux-x86-64.so.2</code></p>
<p>  也就是说我们在执行具有动态链接依赖的可执行文件时</p>
<p>  <code>./a.out</code> 和 <code>/lib64/ld-linux-x86-64.so.2 ./a.out</code> 是等价的</p>
</blockquote>
<h4 id="动态链接的实现"><a href="#动态链接的实现" class="headerlink" title="动态链接的实现"></a>动态链接的实现</h4><h2 id="AbstractMachine"><a href="#AbstractMachine" class="headerlink" title="AbstractMachine"></a>AbstractMachine</h2><blockquote>
<p>  主要讲了计算机的发展历史，建议看原视频</p>
</blockquote>
<h2 id="I-O设备"><a href="#I-O设备" class="headerlink" title="I&#x2F;O设备"></a>I&#x2F;O设备</h2><h3 id="两个特殊的I-O设备"><a href="#两个特殊的I-O设备" class="headerlink" title="两个特殊的I&#x2F;O设备"></a>两个特殊的I&#x2F;O设备</h3><h4 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h4><ul>
<li>系统里可能有很多（甚至是可变的）I&#x2F;O设备<ul>
<li>总线实现了设备的查找、映射、命令&#x2F;数据的转发</li>
</ul>
</li>
<li>CPU可以只直接连接到总线<ul>
<li>总线可以连接其他总线</li>
<li>例子：<code>lspci -t, lsusb -t</code></li>
</ul>
</li>
</ul>
<h4 id="中断控制器"><a href="#中断控制器" class="headerlink" title="中断控制器"></a>中断控制器</h4><ul>
<li>管理多个产生中断的设备<ul>
<li>汇总成一个中断的设备</li>
<li>支持中断表的屏蔽、优先级管理等</li>
</ul>
</li>
</ul>
<h2 id="调试：理论与实践"><a href="#调试：理论与实践" class="headerlink" title="调试：理论与实践"></a>调试：理论与实践</h2><blockquote>
<p>  已知程序有bug，如何找到？</p>
</blockquote>
<h3 id="调试理论"><a href="#调试理论" class="headerlink" title="调试理论"></a>调试理论</h3><p>实际中的调试：通过观察程序执行的轨迹(trace)</p>
<ul>
<li>缩小错误状态 (error) 可能产生的位置</li>
<li>作出适当的假设</li>
<li>再进行细粒度的定位和诊断</li>
</ul>
<p>最重要的两个工具</p>
<ul>
<li>printf -&gt; 自定义log的trace<ul>
<li>灵活可控、能快速定位问题大概位置、适用于大型软件</li>
<li>无法精确定位、大量的logs管理起来比较麻烦</li>
</ul>
</li>
<li>gdb -&gt; 指令&#x2F;语句级trace<ul>
<li>精确、指令级定位、任意查看程序内部状态</li>
<li>耗费大量时间</li>
</ul>
</li>
</ul>
<h3 id="调试理论：应用"><a href="#调试理论：应用" class="headerlink" title="调试理论：应用"></a>调试理论：应用</h3><blockquote>
<p>  问题诊断其实也是调试</p>
</blockquote>
<p>需求 -&gt; 设计 -&gt; 代码 -&gt; Fault -&gt; Error -&gt; Failure</p>
<p>什么是好的程序？</p>
<ul>
<li>不言自明：能知道是做什么的(specification)<ul>
<li>代码风格很重要</li>
</ul>
</li>
<li>不言自证：能确认代码和specification一致<ul>
<li>代码中的逻辑流很重要</li>
</ul>
</li>
</ul>
<blockquote>
<p>  程序首先是给人读的，其次才是被机器执行的</p>
</blockquote>
<ol>
<li>写好读、易验证的代码</li>
<li>在代码中添加更多的断言</li>
</ol>
<h4 id="断言的意义"><a href="#断言的意义" class="headerlink" title="断言的意义"></a>断言的意义</h4><p>把代码中隐藏的 specification 写出来</p>
<ul>
<li>Fault -&gt; Error (靠测试)</li>
<li>Error -&gt; Failure (靠断言)<ul>
<li>Erro 暴露的越晚，越难调试</li>
<li>追溯导致assert failure的变量值(slice)通常可以快速定位到bug</li>
</ul>
</li>
</ul>
<h4 id="例子：维护父亲节点的平衡树"><a href="#例子：维护父亲节点的平衡树" class="headerlink" title="例子：维护父亲节点的平衡树"></a>例子：维护父亲节点的平衡树</h4><p>e.g.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 结构约束</span></span><br><span class="line">assert(u-&gt;parent == u ||</span><br><span class="line">       u-&gt;parent-&gt;left == u ||</span><br><span class="line">       u-&gt;parent-&gt;right == u);</span><br><span class="line">assert(!u-&gt;left || u-&gt;left-&gt;parent == u);</span><br><span class="line">assert(!u-&gt;right || u-&gt;right-&gt;parent == u);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数值约束</span></span><br><span class="line">assert(!u-&gt;left || u-&gt;left-&gt;val &lt; u-&gt;val);</span><br><span class="line">assert(!u-&gt;right || u-&gt;right-&gt;val &gt; u-&gt;val);</span><br></pre></td></tr></table></figure></div>



<p>一个神奇的编译选项</p>
<ul>
<li>-fsanitize-address<ul>
<li>Address Sanitizer，动态程序分析</li>
</ul>
</li>
</ul>
<h2 id="系统编程与基础设施"><a href="#系统编程与基础设施" class="headerlink" title="系统编程与基础设施"></a>系统编程与基础设施</h2><blockquote>
<p>  论软件自动化可以帮你节省多少时间</p>
</blockquote>
<p>gdb有外部接口，可以远程调试</p>
<h3 id="Differential-Testing"><a href="#Differential-Testing" class="headerlink" title="Differential Testing"></a>Differential Testing</h3><p>感觉和对拍差不多</p>
<h2 id="中断与分时多任务"><a href="#中断与分时多任务" class="headerlink" title="中断与分时多任务"></a>中断与分时多任务</h2><blockquote>
<p>  有时把异常成为同步中断</p>
</blockquote>
<h3 id="x86-64中断过程"><a href="#x86-64中断过程" class="headerlink" title="x86-64中断过程"></a>x86-64中断过程</h3><p>比函数调用复杂一些</p>
<ul>
<li>函数调用需要保存PC到堆栈 (%rsp)<ul>
<li>但中断不仅要保存PC (尤其是在有特权级切换的时候)</li>
</ul>
</li>
</ul>
<p>中断处理</p>
<ul>
<li>自动保存 RIP, CS, RFLAGS, RSP, SS (Error Code)</li>
<li>根据中断&#x2F;异常号跳转到处理程序（特权级切换会触发堆栈切换）<ul>
<li>int &amp;$0x80指令可以产生128号异常</li>
<li>时钟会产生32号中断</li>
<li>键盘会产生33号中断</li>
<li>…</li>
</ul>
</li>
</ul>
<h2 id="虚拟存储"><a href="#虚拟存储" class="headerlink" title="虚拟存储"></a>虚拟存储</h2>
        </div>

        

        
            <ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/Linux/">#Linux</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/C%E8%AF%AD%E8%A8%80/">#C语言</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/">#汇编语言</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/%E5%85%AC%E5%BC%80%E8%AF%BE/">#公开课</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
                
                    <div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="prev"
                        rel="prev"
                        href="/2022/03/13/2022-03-13-algorithm/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">算法</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="next"
                        rel="next"
                        href="/2022/02/13/2023-02-13-cs110/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">CS110</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">南大 ICS</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#nju-ics"><span class="nav-text">nju ics</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#C%E8%AF%AD%E8%A8%80%E6%8B%BE%E9%81%97-%E6%9C%BA%E5%88%B6"><span class="nav-text">C语言拾遗 - 机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7"><span class="nav-text">一些命令行工具</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">预处理器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#include-%E6%8C%87%E4%BB%A4"><span class="nav-text">#include&lt;&gt; 指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BE%8B%E5%AD%90"><span class="nav-text">例子</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%92%8C%E9%93%BE%E6%8E%A5"><span class="nav-text">编译和链接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%93%BE%E6%8E%A5"><span class="nav-text">链接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD"><span class="nav-text">加载</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#C%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E7%9A%84%E4%B8%A4%E4%B8%AA%E8%A7%86%E8%A7%92"><span class="nav-text">C程序执行的两个视角</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%8Emain%E5%87%BD%E6%95%B0%E5%BC%80%E5%A7%8B"><span class="nav-text">从main函数开始</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#C-Type-System"><span class="nav-text">C Type System</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C%E8%AF%AD%E8%A8%80%E6%8B%BE%E9%81%97-%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5"><span class="nav-text">C语言拾遗 - 编程实践</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BE%8B%E5%AD%90-1"><span class="nav-text">例子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81%E7%9A%84%E5%87%86%E5%88%99%EF%BC%9A%E9%99%8D%E4%BD%8E%E7%BB%B4%E6%8A%A4%E6%88%90%E6%9C%AC"><span class="nav-text">编写代码的准则：降低维护成本</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Y-Emulator"><span class="nav-text">Y-Emulator</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%86%E6%9E%B6%E4%BB%A3%E7%A0%81%E9%80%89%E8%AE%B2-%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C"><span class="nav-text">框架代码选讲 - 编译运行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%A1%86%E6%9E%B6%E9%80%89%E8%AE%B2-%E4%BB%A3%E7%A0%81%E5%AF%BC%E8%AF%BB"><span class="nav-text">代码框架选讲 - 代码导读</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA-%E6%95%B4%E6%95%B0%E5%92%8C%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="nav-text">数据的机器级表示 - 整数和浮点数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="nav-text">位运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B1%87%E7%BC%96-%E5%86%85%E8%81%94%E6%B1%87%E7%BC%96%E9%80%89%E8%AE%B2-x86-64"><span class="nav-text">汇编 &#x2F;内联汇编选讲 - x86-64</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ABI"><span class="nav-text">ABI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%8B%E5%AD%90-cdecl-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="nav-text">例子: cdecl 函数调用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8E%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="nav-text">寄存器与函数调用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Inline-Assembly"><span class="nav-text">Inline Assembly</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%93%BE%E6%8E%A5%E5%92%8C%E5%8A%A0%E8%BD%BD"><span class="nav-text">链接和加载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E6%9C%80%E5%B0%8F%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="nav-text">一个最小的可执行程序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5"><span class="nav-text">动态链接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">动态链接的实现</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AbstractMachine"><span class="nav-text">AbstractMachine</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#I-O%E8%AE%BE%E5%A4%87"><span class="nav-text">I&#x2F;O设备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%A4%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84I-O%E8%AE%BE%E5%A4%87"><span class="nav-text">两个特殊的I&#x2F;O设备</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BA%BF"><span class="nav-text">总线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text">中断控制器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%EF%BC%9A%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5"><span class="nav-text">调试：理论与实践</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%E7%90%86%E8%AE%BA"><span class="nav-text">调试理论</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%E7%90%86%E8%AE%BA%EF%BC%9A%E5%BA%94%E7%94%A8"><span class="nav-text">调试理论：应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%AD%E8%A8%80%E7%9A%84%E6%84%8F%E4%B9%89"><span class="nav-text">断言的意义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BE%8B%E5%AD%90%EF%BC%9A%E7%BB%B4%E6%8A%A4%E7%88%B6%E4%BA%B2%E8%8A%82%E7%82%B9%E7%9A%84%E5%B9%B3%E8%A1%A1%E6%A0%91"><span class="nav-text">例子：维护父亲节点的平衡树</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD"><span class="nav-text">系统编程与基础设施</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Differential-Testing"><span class="nav-text">Differential Testing</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E4%B8%8E%E5%88%86%E6%97%B6%E5%A4%9A%E4%BB%BB%E5%8A%A1"><span class="nav-text">中断与分时多任务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#x86-64%E4%B8%AD%E6%96%AD%E8%BF%87%E7%A8%8B"><span class="nav-text">x86-64中断过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8"><span class="nav-text">虚拟存储</span></a></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
            2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">fetch150zy</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共 54 篇文章
                    </span>
                    
                </p>
            
        </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.6.1</a></span>
        </div>
        
        
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>







    
<script src="/js/layouts/lazyload.js" type="module"></script>






  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>









<div class="post-scripts" data-swup-reload-script>
    
        
<script src="/js/tools/tocToggle.js" type="module"></script>

<script src="/js/layouts/toc.js" type="module"></script>

<script src="/js/plugins/tabs.js" type="module"></script>

    
</div>


</body>
</html>
